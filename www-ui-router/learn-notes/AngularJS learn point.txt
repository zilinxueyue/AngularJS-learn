AngularJS learn point  IDE intelliJ 注册方法：help-》 register -> license server 输入：  http://idea.lanyus.com

1. if express

ui-sref="{{1==2? 'proorderhome' : 'forumhome'}}"
if 1==2 then return "proorderhome" else return 'forumhome'

 ui-sref="{{1==2? 'proorderhome' :2==3? 'forumhome': 'farmhome'}}

double if express


2. use the formatData filter
var formatDate = $filter("date")($scope.actionRecordDate, "MM-yy");
  console.log( $filter("date")(new Date(), "yyyy/MM/dd"));

3. angular.forEach
angular.forEach($scope.landlist, function(data,index,array){
                     getLandList.mainlandlist.push(data);

  });

$parent

4. page reload
 $state.go("farmhome", null, {reload: true});

5. ui-serf  when use the if condition to decide wich to go is not wrking can use the ng-if

like : below can not working (not sure whar happaned may be the ui-router config not correct may be the express of the if not crrect )
<!--ui-sref="{{login_app_user_id == subject.app_user_id ?'forumhome.detail.edit':'forumhome.detail.reply({subject_user_id:subject.subject_id,reply_user_id:login_app_user_id})'}}">-->

but use ng-if it's working 
<ons-button modifier="large"  ng-if="login_app_user_id != subject.app_user_id" ui-sref="forumhome.detail.reply({subject_user_id:subject.subject_id,reply_user_id:login_app_user_id})">立即回复</ons-button>
    <ons-button modifier="large" ng-if="login_app_user_id == subject.app_user_id" ui-sref="forumhome.detail.edit">编辑帖子</ons-button>
 
 more：
   when used ui-serf on tag <a>. should delete the "target" otherwise it will open a new page in browser.

6.ng-options有以下格式的语法
 
for array data sources:
 
label for value in array
select as label for value in array
label group by group for value in array
select as label group by group for value in array track by trackexpr
for object data sources:
 
label for (key , value) in object
select as label for (key , value) in object
label group by group for (key, value) in object
select as label group by group for (key, value) in ob

like:
ng-options="land as land.name+'  '+land.area for land in landlist"

land is object 
the value showing is after :as 
before as is the selected object (can be one of land item or the whole object )

7. double orderBy and reverse
<ui  ng-repeat="item  in  items |orderBy:['year','month']:true">

note: "year"/"month" is one key of item's json data

8. some issue when used angular 
if you saved some data in the service. And used them on the page 
but when you back the page it's only refresh the ng-repeat data other data not refreshed 
this can be resolved by reload the page as below
$state.go("farmhome.detail", null, {reload: true});
noted: if you already used the cache it will not request the server
I encounter this issue recentily :
I saved some data in the map. 
when I add some new data and update the map, it's has been updated success. But when I back the the list page 
which used the map data it's not refreshed. and the intresing thing is on the the array in that map 
which I used ng-repeat at the page it's showing.

9. regular expression
ng-pattern = "/^\d{1,11}(?:\.\d{1,2})?$/"
^\d{1,11}(?:\.\d{1,2})?$  // > 0 number 11 bit and 2 .00 bit


10. ons notification alert

 ons.notification.alert({
                            title: "登录失败",
                            buttonLabel:"确定",
                            message: error.message
                        });
11. ui-sref reload
ui-sref-opts="{reload: true}"


12.use ui-router
 When use it with html. do not add the controller on the body. ---- ui-view will add the html into index.html but there will only have on body for the html.
 So if add the controller on the other html's body it's will not include into the view.


13. angularJs timer use
        $scope.clock = {
            now : new Date()
        };
        //var updateClock = function() {
        //    $scope.clock.now = new Date()
        //};
        //setInterval(function() {
        //    $scope.$apply(updateClock);
        //}, 1000);
        //updateClock();
        /**
         * this can be used to set the clock or user to set banner
         */
        var updateClock = $interval(function () {
            $scope.clock.now = new Date()
        }, 1000);

14.使用bootstrap的carousel报错时 把新加的module引入项目即可
 <div id="myCarousel" class="carousel slide">
                <!-- 轮播（Carousel）指标 -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" ng-repeat="aditem in homeaditems" data-slide-to="{{$index}}" class="{{$index==0?'active': ''}}" ></li>
                    <!--<li data-target="#myCarousel" data-slide-to="1"></li>-->
                    <!--<li data-target="#myCarousel" data-slide-to="2"></li>-->
                </ol>
                <!-- 轮播（Carousel）项目 -->
                <div class="carousel-inner">
                    <div ng-repeat="aditem in homeaditems"  class="item {{$index==0?'active': ''}}">
                        <img src="{{aditem.pictureUrl}}" alt="">
                    </div>
                    <!--<div class="item">-->
                        <!--<img src="/wp-content/uploads/2014/07/slide2.png" alt="Second slide">-->
                    <!--</div>-->
                    <!--<div class="item">-->
                        <!--<img src="/wp-content/uploads/2014/07/slide3.png" alt="Third slide">-->
                    <!--</div>-->
                </div>
                <!-- 轮播（Carousel）导航 -->
                <a class="carousel-control left" href="#myCarousel" target="#myCarousel"
                   data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" target="#myCarousel"
                   data-slide="next">&rsaquo;</a>
            </div>
/**  当自动轮播没有进行，尤其是需要点击一次后才开始自动轮播的时候，可以在图片加载的js中加： $('#myCarousel').carousel(); 手动启动轮播（写在图片加载完成后）
 * 把下面的module 引入项目中   这段hack一定要在ui-bootstrap-tpls.js 后引入   noted at <a> tab need add the target otherwise it will link to the href url not change the img
 */
angular.module('ui.bootstrap.carousel', ['ui.bootstrap.transition'])
    .controller('CarouselController', ['$scope', '$timeout', '$transition', '$q', function        ($scope, $timeout, $transition, $q) {
    }]).directive('carousel', [function() {
    return {

    }
}]);

15.ui-router state 配置传多个参数
.state('home.addtocart', {
                    url: "/addtocart?productId&number",
                    views: {
                        homecontentview: {
                            templateUrl: "page/add-to-cart.html"
                        }
                    }

                })

16：关于angularJS 锚点（）
在页面定义标签 比如去下一个页面要光标指向顶部 就是在首页定义标签
<a id="pagetop"></a>

然后在需要光标指向首页的controller里面也引入'$location','$anchorScroll' 在在function代码中调用下面的方法

   $location.hash('pagetop');

        // call $anchorScroll()
        $anchorScroll();
17.关于AngularJS controller 以及ui-router 同时使用造成多次请求的问题
如下：
<div ui-view="homecontentview" >
   <div ng-controller="homeIndexContentCotrl1"> div 1</div>
   <div ng-controller="homeIndexContentCotrl2"> div 2</div>
</div>
此时去替换homecontentview 会出现homeIndexContentCotrl1这个里面的js被重复执行 尤其是在里面发送一些http请求时，会造成重复请求。
解决方法就是去掉2个并行的controller 改用一个 controller 在ui-view统一级别

<div ui-view="homecontentview"  ng-controller="homeIndexContentCotrl">
   <div > div 1</div>
   <div> div 2</div>
</div>

18: date过滤器的用法：

1.在html中用法：{{ date_expression | date : format : timezone}}

实例：

<span>{{1288323623006 | date:'medium'}}</span><br>

 <span>{{1288323623006 | date:'yyyy-MM-dd HH:mm:ss Z'}}</span><br>

<span>{{'1288323623006' | date:'MM/dd/yyyy @ h:mma'}}</span><br>

<span>{{'1288323623006' | date:"MM/dd/yyyy 'at' h:mma"}}</span><br>

输出结果为：

 Oct 29, 2010 11:40:23 AM

 2010-10-29 11:40:23 +0800

10/29/2010 @ 11:40AM

10/29/2010 at 11:40AM

2.在javascript中的用法：$filter('date')(date, format, timezone)

实例：

var today = new Date();
$scope.formatDate = $filter('date')(today, 'yyyy-MM-dd');

输出结果为：

2015-01-28

19：关于页面弹出窗口的用法
 <a data-toggle="modal" data-target="#modalname"></a> 可以用这种方式打开 modalname 对应的div（modalname 对应div的id名字）
 这样打开后div就会浮在页面

 <a class="vc-close" data-target=''  data-dismiss="modal">关闭</a>

 调用这个就可以释放modal 回到原页面data-dismiss="modal"